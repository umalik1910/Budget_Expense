@model IEnumerable<final_budget_expense.Models.BudgetRecord>


@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
    <div id="recordList">
        <table class="table">
            <tr>
                <th>
                    <select id="monthOptions">
                        <option value="0"> All</option>
                        <option value='1'>Janaury</option>
                        <option value='2'>February</option>
                        <option value='3'>March</option>
                        <option value='4'>April</option>
                        <option value='5'>May</option>
                        <option value='6'>June</option>
                        <option value='7'>July</option>
                        <option value='8'>August</option>
                        <option value='9'>September</option>
                        <option value='10'>October</option>
                        <option value='11'>November</option>
                        <option value='12'>December</option>
                    </select>
                </th>
            </tr>
            <tr>
                <th>
                    Date
                </th>
                <th>
                    Type
                </th>
                <th>
                    Description
                </th>
                <th>
                    Amount
                </th>
            </tr>


            @foreach (var item in Model)
            {
                <tr>
                    <td>
                        @Html.Raw(item.DateOfTrans.ToString("d"))
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.TypeOfTrans)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.TransDescription)
                    </td>
                    <td>
                        $@Html.DisplayFor(modelItem => item.Amount)
                    </td>

                </tr>
            }
            <th>
                Total: $@calcTotal()
            </th>
        </table>
    </div>
@functions
{

public double calcTotal() { 
double total = 0;
foreach (var item in Model)
{
    
    double amount = 0;
    if (item.TypeOfTrans == "Expense")
    {
        amount = item.Amount * -1;
        total += amount;
    }
    else if (item.TypeOfTrans == "Income")
    {
        amount = item.Amount;
        total += amount;
    }
}
return total; 
}
}
